import{u as I}from"./employeeStore-4009d962.js";import{_ as R,s as E,r as l,o as k,g as S,w as o,a as e,m as U,d as c,i as C,n as K,b as F,c as N,F as q,t as z}from"./app-f2b2cabb.js";import{V as P}from"./VDataTable-7163fc42.js";const T={setup(){const a=I(),{errors:t,isLoading:f}=E(a);return{employeeStore:a,errors:t,isLoading:f}},data(){return{dialog:!1,form:{employee_no:null,RFID_no:null,full_name:null,is_active:!0}}},methods:{async create(){await this.employeeStore.postEmployee(this.form),Object.keys(this.errors).length||(this.form={employee_no:null,RFID_no:null,full_name:null,is_active:!0},this.dialog=!1)},handleKeyEnter(a){return a.preventDefault(),a.stopPropagation(),!1}}};function j(a,t,f,s,r,v){const d=l("v-btn"),g=l("v-toolbar-title"),h=l("v-spacer"),V=l("v-toolbar-items"),w=l("v-toolbar"),u=l("v-text-field"),m=l("v-col"),D=l("v-form"),y=l("v-row"),b=l("v-container"),_=l("v-card"),x=l("v-dialog");return k(),S(y,{class:"py-2"},{default:o(()=>[e(x,{modelValue:r.dialog,"onUpdate:modelValue":t[4]||(t[4]=i=>r.dialog=i),scrim:!1,transition:"dialog-bottom-transition",style:{"max-width":"30rem"},persistent:""},{activator:o(({props:i})=>[e(d,U({color:"blue-lighten-1",dark:""},i,{"prepend-icon":"mdi-plus",size:"small"}),{default:o(()=>[c(" Register employee ")]),_:2},1040)]),default:o(()=>[e(_,null,{default:o(()=>[e(w,{color:"white",class:"border-b"},{default:o(()=>[e(g,{style:{"flex-basis":"100%"}},{default:o(()=>[c("Employee Registration Form")]),_:1}),e(h),e(V,null,{default:o(()=>[e(d,{variant:"text",onClick:t[0]||(t[0]=i=>r.dialog=!1)},{default:o(()=>[c(" cancel ")]),_:1})]),_:1})]),_:1}),e(b,{style:{"max-width":"50rem"}},{default:o(()=>[e(y,null,{default:o(()=>[e(D,{style:{width:"100%"},onSubmit:C(v.create,["prevent"])},{default:o(()=>[e(m,{cols:"12"},{default:o(()=>{var i;return[e(u,{label:"Employee Number*",required:"",modelValue:r.form.employee_no,"onUpdate:modelValue":t[1]||(t[1]=n=>r.form.employee_no=n),error:!!((i=s.errors)!=null&&i.employee_no),"error-messages":s.errors.employee_no},null,8,["modelValue","error","error-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>{var i;return[e(u,{label:"RFID*",required:"",modelValue:r.form.RFID_no,"onUpdate:modelValue":t[2]||(t[2]=n=>r.form.RFID_no=n),hint:"Put the ID over the RFID scanner to automatically generate RFID number.","persistent-hint":"",onKeydown:K(v.handleKeyEnter,["enter"]),error:!!((i=s.errors)!=null&&i.RFID_no),"error-messages":s.errors.RFID_no},null,8,["modelValue","onKeydown","error","error-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>{var i;return[e(u,{label:"Full Name*",required:"",modelValue:r.form.full_name,"onUpdate:modelValue":t[3]||(t[3]=n=>r.form.full_name=n),error:!!((i=s.errors)!=null&&i.full_name),"error-messages":s.errors.full_name},null,8,["modelValue","error","error-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>[e(d,{block:"",variant:"flat",color:"blue-lighten-1",type:"submit",loading:s.isLoading},{default:o(()=>[c("Register User")]),_:1},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const B=R(T,[["render",j]]),L={setup(){const a=I(),{errors:t,isLoading:f}=E(a);return{employeeStore:a,errors:t,isLoading:f}},props:{employee:Object},data(){return{dialog:!1,form:{id:this.employee.id,employee_no:this.employee.employee_no,full_name:this.employee.full_name,RFID_no:this.employee.RFID_no,is_active:!!this.employee.is_active}}},methods:{async update(){await this.employeeStore.updateEmployee(this.form.id,this.form),Object.keys(this.errors).length||(this.dialog=!1,this.form={id:null,employee_no:null,full_name:null,RFID_no:null,is_active:null})},handleKeyEnter:a=>(a.preventDefault(),a.stopPropagation(),!1)}},O=F("label",{class:"text-grey-darken-1",style:{"font-size":"0.9rem"}}," Change the status of the employee to either active or inactive ",-1);function M(a,t,f,s,r,v){const d=l("v-btn"),g=l("v-toolbar-title"),h=l("v-spacer"),V=l("v-toolbar-items"),w=l("v-toolbar"),u=l("v-text-field"),m=l("v-col"),D=l("v-switch"),y=l("v-form"),b=l("v-row"),_=l("v-container"),x=l("v-card"),i=l("v-dialog");return k(),S(b,{justify:"center"},{default:o(()=>[e(i,{modelValue:r.dialog,"onUpdate:modelValue":t[5]||(t[5]=n=>r.dialog=n),scrim:!1,transition:"dialog-bottom-transition",style:{"max-width":"30rem"},persistent:""},{activator:o(({props:n})=>[e(d,U({color:"blue-lighten-1"},n,{icon:"mdi-pencil",size:"small"}),null,16)]),default:o(()=>[e(x,null,{default:o(()=>[e(w,{color:"white",class:"border-b"},{default:o(()=>[e(g,null,{default:o(()=>[c("Edit Employee")]),_:1}),e(h),e(V,null,{default:o(()=>[e(d,{variant:"text",onClick:t[0]||(t[0]=n=>r.dialog=!1)},{default:o(()=>[c(" cancel ")]),_:1})]),_:1})]),_:1}),e(_,{style:{"max-width":"50rem"}},{default:o(()=>[e(b,null,{default:o(()=>[e(y,{style:{width:"100%"},onSubmit:C(v.update,["prevent"])},{default:o(()=>[e(m,{cols:"12"},{default:o(()=>{var n;return[e(u,{label:"Employee Number*",required:"",modelValue:r.form.employee_no,"onUpdate:modelValue":t[1]||(t[1]=p=>r.form.employee_no=p),errors:!!((n=s.errors)!=null&&n.employee_no),"errors-messages":s.errors.employee_no},null,8,["modelValue","errors","errors-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>{var n;return[e(u,{label:"RFID*",required:"",modelValue:r.form.RFID_no,"onUpdate:modelValue":t[2]||(t[2]=p=>r.form.RFID_no=p),hint:"Put the ID over the RFID scanner to automatically generate RFID number.","persistent-hint":"",errors:!!((n=s.errors)!=null&&n.RFID_no),"errors-messages":s.errors.RFID_no,onKeydown:K(v.handleKeyEnter,["enter"])},null,8,["modelValue","errors","errors-messages","onKeydown"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>{var n;return[e(u,{label:"Full Name*",required:"",modelValue:r.form.full_name,"onUpdate:modelValue":t[3]||(t[3]=p=>r.form.full_name=p),errors:!!((n=s.errors)!=null&&n.full_name),"errors-messages":s.errors.full_name},null,8,["modelValue","errors","errors-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>{var n;return[O,e(D,{modelValue:r.form.is_active,"onUpdate:modelValue":t[4]||(t[4]=p=>r.form.is_active=p),color:"blue-lighten-1",label:`Status: ${r.form.is_active?"active":"inactive"}`,errors:!!((n=s.errors)!=null&&n.is_active),"errors-messages":s.errors.is_active},null,8,["modelValue","label","errors","errors-messages"])]}),_:1}),e(m,{cols:"12"},{default:o(()=>[e(d,{block:"",variant:"flat",color:"blue-lighten-1",type:"submit",loading:s.isLoading},{default:o(()=>[c("Update Employee")]),_:1},8,["loading"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const A=R(L,[["render",M]]);const G={async setup(){const a=I(),{employees:t}=E(a);return await a.getEmployees(),{employees:t,employeeStore:a}},components:{VDataTable:P,Create:B,Edit:A},data(){return{search:"",headers:[{key:"employee_no",title:"Employee Number"},{key:"full_name",title:"Full Name"},{key:"is_active",title:"Status"},{key:"actions"}]}}},H={style:{display:"flex",gap:"2rem","align-items":"center"}};function J(a,t,f,s,r,v){const d=l("Create"),g=l("v-spacer"),h=l("v-text-field"),V=l("v-card-title"),w=l("v-btn"),u=l("router-link"),m=l("Edit"),D=l("v-chip"),y=l("VDataTable"),b=l("v-card");return k(),N(q,null,[F("div",null,[e(d,{onCreated:t[0]||(t[0]=_=>s.employeeStore.getEmployees())})]),e(b,null,{default:o(()=>[e(V,null,{default:o(()=>[c(" Employees "),e(g),e(h,{modelValue:r.search,"onUpdate:modelValue":t[1]||(t[1]=_=>r.search=_),"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},null,8,["modelValue"])]),_:1}),e(y,{headers:r.headers,items:s.employees,search:r.search},{"item.actions":o(({item:_})=>[F("div",H,[e(u,{to:{name:"show",params:{showable:"employee",id:_.selectable.id}}},{default:o(()=>[e(w,{color:"blue-lighten-4 text-grey-darken-2",variant:"flat",size:"small"},{default:o(()=>[c("view details")]),_:1})]),_:2},1032,["to"]),e(m,{employee:_.selectable},null,8,["employee"])])]),"item.is_active":o(({item:_})=>[e(D,{color:_.raw.is_active?"green":"red",size:"small"},{default:o(()=>[c(z(_.raw.is_active?"active":"inactive"),1)]),_:2},1032,["color"])]),_:1},8,["headers","items","search"])]),_:1})],64)}const Y=R(G,[["render",J],["__scopeId","data-v-bdbf7cb7"]]);export{Y as default};
